var Xt=new Uint8Array([0,64,128,192,224]),Yt=new Uint8Array([2,2,2,3,3]),Wt=['": "','": ',"</",'="','":"',"://"],$t=["tfff-of-tfTtf:rf:rf.fffZ","tfff-of-tf","(fff) fff-ffff","tf:rf:rf",0];const ut={byt:128,bits:0},R=0,Ve=1,M=2,Le=3,K=4;var gt=["\0 etaoinsrlcdhupmbgwfyvkqjxz",`"{}_<>:
\0[]\\;'	@*&?!^|\r~\`\0\0\0`,"\0,.01925-/34678() =+$%#\0\0\0\0\0"],ct=new Array(94),Ge=new Uint8Array([0,64,96,128,144,160,176,192,208,216,224,228,232,236,238,240,242,244,246,247,248,249,250,251,252,253,254,255]),je=new Uint8Array([2,3,3,4,4,4,4,4,5,5,6,6,6,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8]),cn=new Uint8Array([57,58,59,87,88,89]),J=5;const pr=90,ln=91,mr=39,vr=40,Er=54,Ar=46,dn=81,Ht=248,Rt=5,Sr=128,Br=2,Cr=0,On=2,Nn=0,Hn=6,Rn=4,hn=33;function Fr(t,n,e){for(var r=0;r<e;++r)t[r]=n}var un=0;function Dn(){if(!un){Fr(ct,"\0",94);for(var t=0;t<3;t++)for(var n=0;n<28;n++){var e=gt[t].charCodeAt(n);e!==0&&e>32&&(ct[e-hn]=(t<<5)+n,e>=97&&e<=122&&(ct[e-hn-32]=(t<<5)+n))}un=1}}var Ur=new Uint8Array([128,192,224,240,248,252,254,255]);function L(t,n,e,r,i){for(var s,a,o,f;i>0;){if(s=e%8,a=i,o=r&Ur[a-1],o>>=s,a+s>8&&(a=8-s),f=e/8,f<0||n<=f)return-1;s==0?t[e>>3]=o:t[e>>3]|=o,r<<=a,e+=a,i-=a}return e}function $(t,n,e,r){return r==K?(e=L(t,n,e,Ht,Rt),e=L(t,n,e,Sr,Br)):e=L(t,n,e,Cr,On),e}function Fe(t,n,e,r,i,s,a){var o=r>>5,f=r&31;if(a[o]==0&&o!=R)return[e,i];switch(o){case R:i!=R&&(e=$(t,n,e,i),e=L(t,n,e,s[R],a[R]),i=R);break;case Ve:e=$(t,n,e,i),e=L(t,n,e,s[Ve],a[Ve]);break;case M:i!=M&&(e=$(t,n,e,i),e=L(t,n,e,s[M],a[M]),gt[o].charCodeAt(f)>=48&&gt[o].charCodeAt(f)<=57&&(i=M))}return[L(t,n,e,Ge[f],je[f]),i]}const Ue=new Uint8Array([2,4,7,11,16]),Dt=[4,20,148,2196,67732],xt=new Uint8Array([1,130,195,228,244]);function be(t,n,e,r){for(var i=0;i<5;i++)if(r<Dt[i]){e=L(t,n,e,xt[i]&248,xt[i]&7);var s=r-(i>0?Dt[i-1]:0)<<16-Ue[i];return Ue[i]>8?(e=L(t,n,e,s>>8,8),e=L(t,n,e,s&255,Ue[i]-8)):e=L(t,n,e,s>>8,Ue[i]),e}return e}const te=new Uint8Array([6,12,14,16,21]),Pn=[0,64,4160,20544,86080];function Ir(t,n,e,r,i){const s=new Uint8Array([1,130,195,228,245,253]);var a=0,o=r-i;o<0&&(o=-o);for(var f=0;f<5;f++)if(a+=1<<te[f],o<a){e=L(t,n,e,s[f]&248,s[f]&7),e=L(t,n,e,i>r?128:0,1);var l=o-Pn[f];return te[f]>16?(l<<=24-te[f],e=L(t,n,e,l>>16,8),e=L(t,n,e,l>>8&255,8),e=L(t,n,e,l&255,te[f]-16)):te[f]>8?(l<<=16-te[f],e=L(t,n,e,l>>8,8),e=L(t,n,e,l&255,te[f]-8)):(l<<=8-te[f],e=L(t,n,e,l&255,te[f])),e}return e}function At(t,n,e){var r=0;if(typeof t=="string")return r=t.codePointAt(e),[r,r===t.charCodeAt(e)?1:2];var i=0;return e<n-1&&(t[e]&224)==192&&(t[e+1]&192)==128?(i=2,r=t[e]&31,r<<=6,r+=t[e+1]&63,r<128&&(r=0)):e<n-2&&(t[e]&240)==224&&(t[e+1]&192)==128&&(t[e+2]&192)==128?(i=3,r=t[e]&15,r<<=6,r+=t[e+1]&63,r<<=6,r+=t[e+2]&63,r<2048&&(r=0)):e<n-3&&(t[e]&248)==240&&(t[e+1]&192)==128&&(t[e+2]&192)==128&&(t[e+3]&192)==128&&(i=4,r=t[e]&7,r<<=6,r+=t[e+1]&63,r<<=6,r+=t[e+2]&63,r<<=6,r+=t[e+3]&63,r<65536&&(r=0)),[r,i]}function kr(t,n,e,r,i,s,a,o,f){var l,c,d=0,h=0;for(l=e-J;l>=0;l--){for(c=e;c<n&&l+c-e<e&&t[c]==t[l+c-e];c++);for(;t[c]>>6==2;)c--;if(c-e>J-1){var m=c-e-J,F=e-l-J+1;m>h&&(h=m,d=F)}}return h>0?(s=$(r,i,s,a),s=L(r,i,s,o[Le],f[Le]),s=be(r,i,s,h),s=be(r,i,s,d),e+=h+J,e--,[e,s]):[-e,s]}function Lr(t,n,e,r,i,s,a,o,f,l,c){var d=s,h=0,m=0,F=0,g=0,u=0;do for(var p,x,w=a[o-g],I=w.length,b=g==0?e:I;u<b;u++){for(p=e,x=u;x<I&&x<b&&p<n&&w[x]===t[p];x++,p++);for(;w[x]>>6==2;)x--;if(x-u>=J){if(h>0){if(u>m)continue;s=d}h=x-u,m=u,F=g,s=$(r,i,s,f),s=L(r,i,s,l[Le],c[Le]),s=be(r,i,s,h-J),s=be(r,i,s,m),s=be(r,i,s,F),u+=h}}while(g++<o);return h>0?(e+=h,e--,[e,s]):[-e,s]}function St(t){return t>=48&&t<=57?t-48<<4:t>=65&&t<=70?t-65+10<<4:t>=97&&t<=102?t-97+10<<4:0}const ue=0,ae=1,Ke=2,Pt=3;function rt(t){return t>=48&&t<=57?ue:t>=97&&t<=102?ae:t>=65&&t<=70?Ke:Pt}function it(t,n,e,r,i,s){return e=$(t,n,e,r),e=L(t,n,e,i[M],s[M]),e=L(t,n,e,0,2),e}function Tr(t,n,e,r,i,s,a){return a[R]?(M!=r&&(e=$(t,n,e,r),e=L(t,n,e,s[M],a[M])),e=L(t,n,e,Ge[ln&31],je[ln&31])):e=L(t,n,e,Nn,i?Rn:Hn),e=L(t,n,e,e==0||t[(e-1)/8]<<(e-1&7)>=0?0:255,8-e%8&7),e}function Or(t,n,e){if(e)return t===n;if(t.length!==n.length)return!1;for(var r=0;r<n.length;r++)if(t.charCodeAt(r)!==n[r])return!1;return!0}const Nr=new Uint8Array([0,224,192,240]),Hr=new Uint8Array([1,4,3,4]);function Jt(t,n,e,r,i,s,a){var o,f,l,c,d,h,m,F,g,u=null,p;t instanceof Array&&(u=t,p=n,t=u[p],n=t.length);var x=e.length,w=typeof t=="string";for(Dn(),c=0,m=0,o=R,g=!1,c=L(e,x,c,ut.byt,ut.bits),f=0;f<n;f++){if(i[Le]>0&&f<n-J+1)if(u!==void 0&&u!=null){if([f,c]=Lr(t,n,f,e,x,c,u,p,o,r,i),f>0)continue;if(f<0&&c<0)return x+1;f=-f}else{if([f,c]=kr(t,n,f,e,x,c,o,r,i),f>0)continue;if(f<0&&c<0)return x+1;f=-f}if(d=t[f],f>0&&n>4&&f<n-4&&i[M]>0&&d<=(w?"~":126)&&d==t[f-1]&&d==t[f+1]&&d==t[f+2]&&d==t[f+3]){for(var I=f+4;I<n&&t[I]==d;)I++;I-=f,[c,o]=Fe(e,x,c,pr,o,r,i),c=be(e,x,c,I-4),f+=I,f--;continue}if(f<=n-36&&i[M]>0){var b=w?"-":45,v=ue;if(t[f+8]===b&&t[f+13]===b&&t[f+18]===b&&t[f+23]===b){for(var A=f;A<f+36;A++){var U=w?t.charCodeAt(A):t[A];if(!(U===45&&(A==8||A==13||A==18||A==23))){var C=rt(U);if(C==Pt)break;if(C!=ue){if(v!=ue&&v!=C)break;v=C}}}if(A==f+36){for(c=it(e,x,c,o,r,i),c=L(e,x,c,v==ae?192:240,v==ae?3:5),A=f;A<f+36;A++){var U=w?t.charCodeAt(A):t[A];U!==45&&(c=L(e,x,c,St(U),4))}f+=35;continue}}}if(f<n-5&&i[M]>0){var v=ue,O=0;do{var U=w?t.charCodeAt(f+O):t[f+O],C=rt(U);if(C==Pt)break;if(C!=ue){if(v!=ue&&v!=C)break;v=C}O++}while(f+O<n);if(O>10&&v==ue&&(v=ae),(v==ae||v==Ke)&&O>3){c=it(e,x,c,o,r,i),c=L(e,x,c,v==ae?128:224,v==ae?2:4),c=be(e,x,c,O);do{var U=w?t.charCodeAt(f):t[f];c=L(e,x,c,St(U),4),f++}while(--O>0);f--;continue}}if(a!=null&&a!=null){var k;for(k=0;k<5;k++)if(typeof a[k]=="string"){for(var T=a[k].length,D=0;D<T&&f+D<n;D++){var y=a[k][D];if(d=w?t.charCodeAt(f+D):t[f+D],y==="f"||y==="F"){if(rt(d)!=(y==="f"?ae:Ke)&&rt(d)!=ue)break}else if(y==="r"||y==="t"||y==="o"){if(d<48||d>(y==="r"?55:y==="t"?51:49))break}else if(y.charCodeAt(0)!==d)break}if(D/T>.66){T=T-D,c=it(e,x,c,o,r,i),c=L(e,x,c,0,1),c=L(e,x,c,xt[k]&248,xt[k]&7),c=be(e,x,c,T);for(var S=0;S<D;S++){var y=a[k][S];d=w?t.charCodeAt(f+S):t[f+S],y==="f"||y==="F"?c=L(e,x,c,St(d),4):(y==="r"||y==="t"||y==="o")&&(y=y==="r"?3:y==="t"?2:1,c=L(e,x,c,d-48<<8-y,y))}f+=D,f--;break}}if(k<5)continue}if(s!=null){var k;for(k=0;k<6;k++){var E=s[k].length;if(n-E>=0&&f<=n-E&&i[cn[k]>>5]&&Or(s[k].slice(0,E),t.slice(f,f+E),w)){[c,o]=Fe(e,x,c,cn[k],o,r,i),f+=E,f--;break}}if(k<6)continue}if(d=w?t.charCodeAt(f):t[f],F=!1,d>=65&&d<=90?F=!0:g&&(g=!1,c=$(e,x,c,o),c=L(e,x,c,r[R],i[R]),o=R),F&&!g&&(o==M&&(c=$(e,x,c,o),c=L(e,x,c,r[R],i[R]),o=R),c=$(e,x,c,o),c=L(e,x,c,r[R],i[R]),o==K&&(o=R,c=$(e,x,c,o),c=L(e,x,c,r[R],i[R]))),h=0,f+1<n&&(h=w?t.charCodeAt(f+1):t[f+1]),d>=32&&d<=126){if(F&&!g){for(l=f+4;l>=f&&l<n;l--){var N=w?t.charCodeAt(l):t[l];if(N<65||N>90)break}l==f-1&&(c=$(e,x,c,o),c=L(e,x,c,r[R],i[R]),o=R,g=!0)}if(o==K){var H=" .,".indexOf(String.fromCharCode(d));if(H!=-1){c=L(e,x,c,Ht,Rt),c=L(e,x,c,Nr[H],Hr[H]);continue}}d-=32,g&&F&&(d+=32),d===0?o==M?c=L(e,x,c,Ge[dn&31],je[dn&31]):c=L(e,x,c,Ge[1],je[1]):(d=d-1,[c,o]=Fe(e,x,c,ct[d],o,r,i))}else if(d===13&&h===10)[c,o]=Fe(e,x,c,vr,o,r,i),f++;else if(d===10)o==K?(c=L(e,x,c,Ht,Rt),c=L(e,x,c,240,4)):[c,o]=Fe(e,x,c,mr,o,r,i);else if(d===13)[c,o]=Fe(e,x,c,Er,o,r,i);else if(d===9)[c,o]=Fe(e,x,c,Ar,o,r,i);else{var P,Z,V;if([P,Z]=At(t,n,f),P>0)f+=Z,o!=K&&([V,Z]=At(t,n,f),V>0?(o!=R&&(c=$(e,x,c,o),c=L(e,x,c,r[R],i[R])),c=$(e,x,c,o),c=L(e,x,c,r[R],i[R]),c=L(e,x,c,Ge[1],je[1]),o=K):(c=$(e,x,c,o),c=L(e,x,c,r[K],i[K]))),c=Ir(e,x,c,P,m),m=P,f--;else{for(var Q=1,q=f+1;q<n;q++){var z=t[q];if(At(t,n,q)>0||q<n-4&&z===t[q-1]&&z===t[q+1]&&z===t[q+2]&&z===t[q+3])break;Q++}c=it(e,x,c,o,r,i),c=L(e,x,c,248,5),c=be(e,x,c,Q);do c=L(e,x,c,t[f++],8);while(--Q>0);f--}}}{var le=(c+7)/8;return c=Tr(e,le,c,o,g,r,i),le}}function Rr(t,n,e){return Jt(t,n,e,Xt,Yt,Wt,$t)}function Qt(t,n){return t[n>>3]&128>>n%8}function _t(t,n,e){var r=e&7,i=e>>3;n>>=3;var s=t[i]<<r&255;return i++,i<n?s|=t[i]>>8-r:s|=255>>8-r,[s,e]}const Dr=5,Pr=new Uint8Array([127,191,223,239,255]),Kr=new Uint8Array([0,4,8,12,20]),qr=new Uint8Array([127,63,31,15,15]),Mr=new Uint8Array([5,4,3,1,0]),zr=new Uint8Array([32,32,65,66,99,100,101,102,103,103,136,137,170,170,171,171,172,172,205,206,207,207,208,208,209,209,242,243,244,245,246,247,248,249,250,251]);function Bt(t,n,e){if(e<n){var r;[r,e]=_t(t,n,e);var i=0;do if(r<=Pr[i]){var s=zr[Kr[i]+((r&qr[i])>>Mr[i])];return e+=(s>>5)+1,e>n?[99,e]:[s&31,e]}while(++i<Dr)}return[99,e]}const Zr=new Uint8Array([128,192,224,240,248,252,254,255]);function Ct(t,n,e,r,i){if(!i[R])return[R,e];if(e<n){var s;[s,e]=_t(t,n,e);for(var a=0;a<5;a++)if(i[a]>0&&(s&Zr[i[a]-1])==r[a])return e+=i[a],[a,e]}return[99,e]}function We(t,n,e,r){for(var i=0;e<n&&Qt(t,e)>0;)if(i++,e++,i==r)return[i,e];return e>=n?[99,e]:(e++,[i,e])}function Xe(t,n,e,r){for(var i=0;r-- >0&&e<n;)i+=Qt(t,e)>0?1<<r:0,e++;return r<0?i:-1}function we(t,n,e){var r=0;if([r,n]=We(t,e,n,4),r==99)return[-1,n];if(n+Ue[r]-1>=e)return[-1,n];var i=Xe(t,e,n,Ue[r])+(r>0?Dt[r-1]:0);return n+=Ue[r],[i,n]}function Vr(t,n,e){var r=0;if([r,n]=We(t,e,n,5),r==99)return[2147483491,n];if(r==5)return[r,n]=We(t,e,n,4),[2147483392+r,n];if(r>=0){var i=n<e?Qt(t,n):0;if(n++,n+te[r]-1>=e)return[2147483491,n];var s=Xe(t,e,n,te[r]);return s+=Pn[r],n+=te[r],[i>0?-s:s,n]}return[0,n]}function gn(t,n,e,r,i,s,a,o,f,l,c){var d=0;if([d,i]=we(t,i,n),d+=J,d<J)return[-1,r];var h=0;if([h,i]=we(t,i,n),h<0)return[-1,r];var m=0;if([m,i]=we(t,i,n),m<0)return[-1,r];var F;if(m==0)F=e??r;else{if(a<m)return[-1,r];e==null?F=$e(s,a-m,null,o,f,l,c):(F=new Uint8Array((h+d)*2),$e(s,a-m,F,o,f,l,c))}if(e==null)r+=typeof F=="string"?F.substr(h,d):F.slice(h,d);else for(var g=0;g<d&&!(r>=e.length);g++)e[r]=F[h+g],r++;return[i,r]}function xn(t,n,e,r,i){var s=0;if([s,i]=we(t,i,n),s+=J,s<J)return[-1,r];var a=0;if([a,i]=we(t,i,n),a+=J-1,a<J-1)return[-1,r];if(e==null){if(r.length<a)return[-1,r];r+=r.substr(r.length-a,s)}else for(var o=0;o<s&&!(r>=e.length);o++)e[r]=e[r-a],r++;return[i,r]}function bn(t,n){return t>=0&&t<=9?String.fromCharCode(48+t):n<Ke?String.fromCharCode(97+t-10):String.fromCharCode(65+t-10)}function Gr(t,n,e){return e<2048?(t[n++]=192+(e>>6),t[n++]=128+(e&63)):e<65536?(t[n++]=224+(e>>12),t[n++]=128+(e>>6&63),t[n++]=128+(e&63)):(t[n++]=240+(e>>18),t[n++]=128+(e>>12&63),t[n++]=128+(e>>6&63),t[n++]=128+(e&63)),n}function re(t,n,e){return t==null?n+=e:n<t.length&&(t[n++]=e.charCodeAt(0)),n}function Ft(t,n,e){if(t==null)n+=e;else for(var r=0;r<e.length&&!(n>=t.length);r++)t[n++]=e.charCodeAt(r);return n}function $e(t,n,e,r,i,s,a){var o,f,l,c,d,h=null,m;Dn(),f=ut.bits,o=l=R,d=0;var F=0;t instanceof Array&&(h=t,m=n,t=h[m],n=t.length),n<<=3;for(var g=e==null?"":0;f<n;){var u=f;if(o==K||l==K){o!=K&&(l=o);var p;if([p,f]=Vr(t,f,n),p>>8==8388607){var x=p&255;if(x==99)break;switch(x){case 0:g=re(e,g," ");continue;case 1:if([l,f]=Ct(t,n,f,r,i),l==99){f=n;continue}if(l==K||l==R){o=l;continue}if(l==Le){if(h==null?[f,g]=xn(t,n,e,g,f):[f,g]=gn(t,n,e,g,f,h,m,r,i,s,a),f<0)return g;l=o;continue}break;case 2:g=re(e,g,",");continue;case 3:g=re(e,g,".");continue;case 4:g=re(e,g,`
`);continue}}else F+=p,F>0&&(e==null?g+=String.fromCodePoint(F):g=Gr(e,g,F));if(o==K&&l==K)continue}else l=o;var w="",I=d;if([c,f]=Bt(t,n,f),c==99||l==99){f=u;break}if(c==0&&l!=Ve){if(f>=n)break;if((l!=M||o!=K)&&([l,f]=Ct(t,n,f,r,i),l==99||f>=n)){f=u;break}if(l==R)if(o==R){if(i[R]==0&&Nn==(_t(t,n,f-On)&255<<8-(d?Rn:Hn)))break;if(d){I=d=0;continue}if([c,f]=Bt(t,n,f),c==99){f=u;break}if(c==0){if([l,f]=Ct(t,n,f,r,i),l==99){f=u;break}if(l==R){d=1;continue}}I=1}else{o=R;continue}else if(l==Le){if(h==null?[f,g]=xn(t,n,e,g,f):[f,g]=gn(t,n,e,g,f,h,m,r,i,s,a),f<0)break;continue}else{if(l==K)continue;if((l!=M||o!=K)&&([c,f]=Bt(t,n,f)),c==99){f=u;break}if(l==M&&c==0){var b;if([b,f]=We(t,n,f,5),b==99)break;if(b==0){if([b,f]=We(t,n,f,4),b>=5)break;var v;if([v,f]=we(t,f,n),v<0||a==null||a[b]==null)break;var A=a[b].length;if(v>A)break;v=A-v;for(var U=!1,C=0;C<v;C++){var O=a[b][C];if(O==="f"||O==="r"||O==="t"||O==="o"||O==="F"){var k=O==="f"||O==="F"?4:O==="r"?3:O==="t"?2:1,T=Xe(t,n,f,k);if(T<0){U=!0;break}var D=bn(T,O==="f"?ae:Ke);g=re(e,g,D),f+=k}else g=re(e,g,O)}if(U)break}else if(b==5){var y;if([y,f]=we(t,f,n),y<0||y==0)break;do{var T=Xe(t,n,f,8);if(T<0)break;var S=String.fromCharCode(T);g=re(e,g,S),f+=8}while(--y>0)}else{var E=0;if(b==2||b==4)E=32;else if([E,f]=we(t,f,n),E<0||E==0)break;do{var N=Xe(t,n,f,4);if(N<0)break;var D=bn(N,b<3?ae:Ke);g=re(e,g,D),(b==2||b==4)&&(E==25||E==21||E==17||E==13)&&(g=re(e,g,"-")),f+=4}while(--E>0);if(E>0)break}o==K&&(l=K);continue}}}if(I&&c==1){l=o=K;continue}if(l<3&&c<28&&(w=gt[l].charAt(c)),w>="a"&&w<="z")o=R,I&&(w=String.fromCharCode(w.charCodeAt(0)-32));else if(w!==0&&w.charCodeAt(0)>=48&&w.charCodeAt(0)<=57)o=M;else if(w.charCodeAt(0)===0&&w!=="0"){if(c==8)g=Ft(e,g,`\r
`);else if(l==M&&c==26){var H;if([H,f]=we(t,f,n),H<0)break;H+=4;for(var P=e==null?g.charAt(g.length-1):String.fromCharCode(e[g-1]);H--;)g=re(e,g,P)}else if(l==Ve&&c>24)c-=25,g=Ft(e,g,s[c]);else if(l==M&&c>22&&c<26)c-=20,g=Ft(e,g,s[c]);else break;o==K&&(l=K);continue}o==K&&(l=K),g=re(e,g,w)}return g}function jr(t,n){return $e(t,n,null,Xt,Yt,Wt,$t)}typeof module<"u"&&module.exports&&(module.exports={unishox2_compress:Jt,unishox2_compress_simple:Rr,unishox2_decompress:$e,unishox2_decompress_simple:jr,magic:ut,USX_HCODES_DFLT:Xt,USX_HCODE_LENS_DFLT:Yt,USX_FREQ_SEQ_DFLT:Wt,USX_TEMPLATES:$t});const Ne=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Xr(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Kt(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function tt(t,...n){if(!Xr(t))throw new Error("Uint8Array expected");if(n.length>0&&!n.includes(t.length))throw new Error("Uint8Array expected of length "+n+", got length="+t.length)}function Yr(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Kt(t.outputLen),Kt(t.blockLen)}function bt(t,n=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(n&&t.finished)throw new Error("Hash#digest() has already been called")}function Wr(t,n){tt(t);const e=n.outputLen;if(t.length<e)throw new Error("digestInto() expects output buffer of length at least "+e)}function qe(...t){for(let n=0;n<t.length;n++)t[n].fill(0)}function Ut(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function se(t,n){return t<<32-n|t>>>n}function $r(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function en(t){return typeof t=="string"&&(t=$r(t)),tt(t),t}function Jr(...t){let n=0;for(let r=0;r<t.length;r++){const i=t[r];tt(i),n+=i.length}const e=new Uint8Array(n);for(let r=0,i=0;r<t.length;r++){const s=t[r];e.set(s,i),i+=s.length}return e}class Kn{}function tn(t){const n=r=>t().update(en(r)).digest(),e=t();return n.outputLen=e.outputLen,n.blockLen=e.blockLen,n.create=()=>t(),n}function Qr(t=32){if(Ne&&typeof Ne.getRandomValues=="function")return Ne.getRandomValues(new Uint8Array(t));if(Ne&&typeof Ne.randomBytes=="function")return Uint8Array.from(Ne.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const nn=BigInt(0),qt=BigInt(1);function Me(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function rn(t){if(!Me(t))throw new Error("Uint8Array expected")}function Je(t,n){if(typeof n!="boolean")throw new Error(t+" boolean expected, got "+n)}function ft(t){const n=t.toString(16);return n.length&1?"0"+n:n}function qn(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?nn:BigInt("0x"+t)}const Mn=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",_r=Array.from({length:256},(t,n)=>n.toString(16).padStart(2,"0"));function Qe(t){if(rn(t),Mn)return t.toHex();let n="";for(let e=0;e<t.length;e++)n+=_r[t[e]];return n}const de={_0:48,_9:57,A:65,F:70,a:97,f:102};function wn(t){if(t>=de._0&&t<=de._9)return t-de._0;if(t>=de.A&&t<=de.F)return t-(de.A-10);if(t>=de.a&&t<=de.f)return t-(de.a-10)}function wt(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(Mn)return Uint8Array.fromHex(t);const n=t.length,e=n/2;if(n%2)throw new Error("hex string expected, got unpadded hex of length "+n);const r=new Uint8Array(e);for(let i=0,s=0;i<e;i++,s+=2){const a=wn(t.charCodeAt(s)),o=wn(t.charCodeAt(s+1));if(a===void 0||o===void 0){const f=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+f+'" at index '+s)}r[i]=a*16+o}return r}function ke(t){return qn(Qe(t))}function zn(t){return rn(t),qn(Qe(Uint8Array.from(t).reverse()))}function _e(t,n){return wt(t.toString(16).padStart(n*2,"0"))}function Zn(t,n){return _e(t,n).reverse()}function ie(t,n,e){let r;if(typeof n=="string")try{r=wt(n)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(Me(n))r=Uint8Array.from(n);else throw new Error(t+" must be hex string or Uint8Array");const i=r.length;if(typeof e=="number"&&i!==e)throw new Error(t+" of length "+e+" expected, got "+i);return r}function yt(...t){let n=0;for(let r=0;r<t.length;r++){const i=t[r];rn(i),n+=i.length}const e=new Uint8Array(n);for(let r=0,i=0;r<t.length;r++){const s=t[r];e.set(s,i),i+=s.length}return e}const It=t=>typeof t=="bigint"&&nn<=t;function fn(t,n,e){return It(t)&&It(n)&&It(e)&&n<=t&&t<e}function De(t,n,e,r){if(!fn(n,e,r))throw new Error("expected valid "+t+": "+e+" <= n < "+r+", got "+n)}function e1(t){let n;for(n=0;t>nn;t>>=qt,n+=1);return n}const pt=t=>(qt<<BigInt(t))-qt,kt=t=>new Uint8Array(t),yn=t=>Uint8Array.from(t);function t1(t,n,e){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof n!="number"||n<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");let r=kt(t),i=kt(t),s=0;const a=()=>{r.fill(1),i.fill(0),s=0},o=(...d)=>e(i,r,...d),f=(d=kt(0))=>{i=o(yn([0]),d),r=o(),d.length!==0&&(i=o(yn([1]),d),r=o())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const h=[];for(;d<n;){r=o();const m=r.slice();h.push(m),d+=r.length}return yt(...h)};return(d,h)=>{a(),f(d);let m;for(;!(m=h(l()));)f();return a(),m}}const n1={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Me(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,n)=>n.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function mt(t,n,e={}){const r=(i,s,a)=>{const o=n1[s];if(typeof o!="function")throw new Error("invalid validator function");const f=t[i];if(!(a&&f===void 0)&&!o(f,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+f)};for(const[i,s]of Object.entries(n))r(i,s,!1);for(const[i,s]of Object.entries(e))r(i,s,!0);return t}function pn(t){const n=new WeakMap;return(e,...r)=>{const i=n.get(e);if(i!==void 0)return i;const s=t(e,...r);return n.set(e,s),s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ee=BigInt(0),W=BigInt(1),Ie=BigInt(2),r1=BigInt(3),Mt=BigInt(4),mn=BigInt(5),vn=BigInt(8);function ne(t,n){const e=t%n;return e>=ee?e:n+e}function zt(t,n){if(t===ee)throw new Error("invert: expected non-zero number");if(n<=ee)throw new Error("invert: expected positive modulus, got "+n);let e=ne(t,n),r=n,i=ee,s=W;for(;e!==ee;){const o=r/e,f=r%e,l=i-s*o;r=e,e=f,i=s,s=l}if(r!==W)throw new Error("invert: does not exist");return ne(i,n)}function i1(t){let n=t-W,e=0;for(;n%Ie===ee;)n/=Ie,e++;let r=Ie;const i=nt(t);for(;r<t&&En(i,r);)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(e===1){const a=(t+W)/Mt;return function(f,l){const c=f.pow(l,a);if(!f.eql(f.sqr(c),l))throw new Error("Cannot find square root");return c}}const s=(n+W)/Ie;return function(o,f){if(!En(o,f))throw new Error("Cannot find square root");let l=e,c=o.pow(o.mul(o.ONE,r),n),d=o.pow(f,s),h=o.pow(f,n);for(;!o.eql(h,o.ONE);){if(o.eql(h,o.ZERO))return o.ZERO;let m=1;for(let g=o.sqr(h);m<l&&!o.eql(g,o.ONE);m++)g=o.sqr(g);const F=o.pow(c,W<<BigInt(l-m-1));c=o.sqr(F),d=o.mul(d,F),h=o.mul(h,c),l=m}return d}}function f1(t){return t%Mt===r1?function(e,r){const i=(t+W)/Mt,s=e.pow(r,i);if(!e.eql(e.sqr(s),r))throw new Error("Cannot find square root");return s}:t%vn===mn?function(e,r){const i=e.mul(r,Ie),s=(t-mn)/vn,a=e.pow(i,s),o=e.mul(r,a),f=e.mul(e.mul(o,Ie),a),l=e.mul(o,e.sub(f,e.ONE));if(!e.eql(e.sqr(l),r))throw new Error("Cannot find square root");return l}:i1(t)}const s1=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function o1(t){const n={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},e=s1.reduce((r,i)=>(r[i]="function",r),n);return mt(t,e)}function a1(t,n,e){if(e<ee)throw new Error("invalid exponent, negatives unsupported");if(e===ee)return t.ONE;if(e===W)return n;let r=t.ONE,i=n;for(;e>ee;)e&W&&(r=t.mul(r,i)),i=t.sqr(i),e>>=W;return r}function Vn(t,n,e=!1){const r=new Array(n.length).fill(e?t.ZERO:void 0),i=n.reduce((a,o,f)=>t.is0(o)?a:(r[f]=a,t.mul(a,o)),t.ONE),s=t.inv(i);return n.reduceRight((a,o,f)=>t.is0(o)?a:(r[f]=t.mul(a,r[f]),t.mul(a,o)),s),r}function c1(t,n){const e=(t.ORDER-W)/Ie,r=t.pow(n,e),i=t.eql(r,t.ONE),s=t.eql(r,t.ZERO),a=t.eql(r,t.neg(t.ONE));if(!i&&!s&&!a)throw new Error("Cannot find square root: probably non-prime P");return i?1:s?0:-1}function En(t,n){const e=c1(t,n);return e===0||e===1}function Gn(t,n){n!==void 0&&Kt(n);const e=n!==void 0?n:t.toString(2).length,r=Math.ceil(e/8);return{nBitLength:e,nByteLength:r}}function nt(t,n,e=!1,r={}){if(t<=ee)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=Gn(t,n);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let a;const o=Object.freeze({ORDER:t,isLE:e,BITS:i,BYTES:s,MASK:pt(i),ZERO:ee,ONE:W,create:f=>ne(f,t),isValid:f=>{if(typeof f!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof f);return ee<=f&&f<t},is0:f=>f===ee,isOdd:f=>(f&W)===W,neg:f=>ne(-f,t),eql:(f,l)=>f===l,sqr:f=>ne(f*f,t),add:(f,l)=>ne(f+l,t),sub:(f,l)=>ne(f-l,t),mul:(f,l)=>ne(f*l,t),pow:(f,l)=>a1(o,f,l),div:(f,l)=>ne(f*zt(l,t),t),sqrN:f=>f*f,addN:(f,l)=>f+l,subN:(f,l)=>f-l,mulN:(f,l)=>f*l,inv:f=>zt(f,t),sqrt:r.sqrt||(f=>(a||(a=f1(t)),a(o,f))),toBytes:f=>e?Zn(f,s):_e(f,s),fromBytes:f=>{if(f.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+f.length);return e?zn(f):ke(f)},invertBatch:f=>Vn(o,f),cmov:(f,l,c)=>c?l:f});return Object.freeze(o)}function jn(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const n=t.toString(2).length;return Math.ceil(n/8)}function Xn(t){const n=jn(t);return n+Math.ceil(n/2)}function l1(t,n,e=!1){const r=t.length,i=jn(n),s=Xn(n);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const a=e?zn(t):ke(t),o=ne(a,n-W)+W;return e?Zn(o,i):_e(o,i)}function d1(t,n,e,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(n,e,r);const i=BigInt(32),s=BigInt(4294967295),a=Number(e>>i&s),o=Number(e&s),f=r?4:0,l=r?0:4;t.setUint32(n+f,a,r),t.setUint32(n+l,o,r)}function h1(t,n,e){return t&n^~t&e}function u1(t,n,e){return t&n^t&e^n&e}class Yn extends Kn{constructor(n,e,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=n,this.outputLen=e,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(n),this.view=Ut(this.buffer)}update(n){bt(this),n=en(n),tt(n);const{view:e,buffer:r,blockLen:i}=this,s=n.length;for(let a=0;a<s;){const o=Math.min(i-this.pos,s-a);if(o===i){const f=Ut(n);for(;i<=s-a;a+=i)this.process(f,a);continue}r.set(n.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===i&&(this.process(e,0),this.pos=0)}return this.length+=n.length,this.roundClean(),this}digestInto(n){bt(this),Wr(n,this),this.finished=!0;const{buffer:e,view:r,blockLen:i,isLE:s}=this;let{pos:a}=this;e[a++]=128,qe(this.buffer.subarray(a)),this.padOffset>i-a&&(this.process(r,0),a=0);for(let d=a;d<i;d++)e[d]=0;d1(r,i-8,BigInt(this.length*8),s),this.process(r,0);const o=Ut(n),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=f/4,c=this.get();if(l>c.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)o.setUint32(4*d,c[d],s)}digest(){const{buffer:n,outputLen:e}=this;this.digestInto(n);const r=n.slice(0,e);return this.destroy(),r}_cloneInto(n){n||(n=new this.constructor),n.set(...this.get());const{blockLen:e,buffer:r,length:i,finished:s,destroyed:a,pos:o}=this;return n.destroyed=a,n.finished=s,n.length=i,n.pos=o,i%e&&n.buffer.set(r),n}clone(){return this._cloneInto()}}const me=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),j=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),X=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),st=BigInt(2**32-1),An=BigInt(32);function g1(t,n=!1){return n?{h:Number(t&st),l:Number(t>>An&st)}:{h:Number(t>>An&st)|0,l:Number(t&st)|0}}function x1(t,n=!1){const e=t.length;let r=new Uint32Array(e),i=new Uint32Array(e);for(let s=0;s<e;s++){const{h:a,l:o}=g1(t[s],n);[r[s],i[s]]=[a,o]}return[r,i]}const Sn=(t,n,e)=>t>>>e,Bn=(t,n,e)=>t<<32-e|n>>>e,He=(t,n,e)=>t>>>e|n<<32-e,Re=(t,n,e)=>t<<32-e|n>>>e,ot=(t,n,e)=>t<<64-e|n>>>e-32,at=(t,n,e)=>t>>>e-32|n<<64-e;function he(t,n,e,r){const i=(n>>>0)+(r>>>0);return{h:t+e+(i/2**32|0)|0,l:i|0}}const b1=(t,n,e)=>(t>>>0)+(n>>>0)+(e>>>0),w1=(t,n,e,r)=>n+e+r+(t/2**32|0)|0,y1=(t,n,e,r)=>(t>>>0)+(n>>>0)+(e>>>0)+(r>>>0),p1=(t,n,e,r,i)=>n+e+r+i+(t/2**32|0)|0,m1=(t,n,e,r,i)=>(t>>>0)+(n>>>0)+(e>>>0)+(r>>>0)+(i>>>0),v1=(t,n,e,r,i,s)=>n+e+r+i+s+(t/2**32|0)|0,E1=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ve=new Uint32Array(64);class A1 extends Yn{constructor(n=32){super(64,n,8,!1),this.A=me[0]|0,this.B=me[1]|0,this.C=me[2]|0,this.D=me[3]|0,this.E=me[4]|0,this.F=me[5]|0,this.G=me[6]|0,this.H=me[7]|0}get(){const{A:n,B:e,C:r,D:i,E:s,F:a,G:o,H:f}=this;return[n,e,r,i,s,a,o,f]}set(n,e,r,i,s,a,o,f){this.A=n|0,this.B=e|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=a|0,this.G=o|0,this.H=f|0}process(n,e){for(let d=0;d<16;d++,e+=4)ve[d]=n.getUint32(e,!1);for(let d=16;d<64;d++){const h=ve[d-15],m=ve[d-2],F=se(h,7)^se(h,18)^h>>>3,g=se(m,17)^se(m,19)^m>>>10;ve[d]=g+ve[d-7]+F+ve[d-16]|0}let{A:r,B:i,C:s,D:a,E:o,F:f,G:l,H:c}=this;for(let d=0;d<64;d++){const h=se(o,6)^se(o,11)^se(o,25),m=c+h+h1(o,f,l)+E1[d]+ve[d]|0,g=(se(r,2)^se(r,13)^se(r,22))+u1(r,i,s)|0;c=l,l=f,f=o,o=a+m|0,a=s,s=i,i=r,r=m+g|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,a=a+this.D|0,o=o+this.E|0,f=f+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(r,i,s,a,o,f,l,c)}roundClean(){qe(ve)}destroy(){this.set(0,0,0,0,0,0,0,0),qe(this.buffer)}}const Wn=x1(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),S1=Wn[0],B1=Wn[1],Ee=new Uint32Array(80),Ae=new Uint32Array(80);class $n extends Yn{constructor(n=64){super(128,n,16,!1),this.Ah=X[0]|0,this.Al=X[1]|0,this.Bh=X[2]|0,this.Bl=X[3]|0,this.Ch=X[4]|0,this.Cl=X[5]|0,this.Dh=X[6]|0,this.Dl=X[7]|0,this.Eh=X[8]|0,this.El=X[9]|0,this.Fh=X[10]|0,this.Fl=X[11]|0,this.Gh=X[12]|0,this.Gl=X[13]|0,this.Hh=X[14]|0,this.Hl=X[15]|0}get(){const{Ah:n,Al:e,Bh:r,Bl:i,Ch:s,Cl:a,Dh:o,Dl:f,Eh:l,El:c,Fh:d,Fl:h,Gh:m,Gl:F,Hh:g,Hl:u}=this;return[n,e,r,i,s,a,o,f,l,c,d,h,m,F,g,u]}set(n,e,r,i,s,a,o,f,l,c,d,h,m,F,g,u){this.Ah=n|0,this.Al=e|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=a|0,this.Dh=o|0,this.Dl=f|0,this.Eh=l|0,this.El=c|0,this.Fh=d|0,this.Fl=h|0,this.Gh=m|0,this.Gl=F|0,this.Hh=g|0,this.Hl=u|0}process(n,e){for(let w=0;w<16;w++,e+=4)Ee[w]=n.getUint32(e),Ae[w]=n.getUint32(e+=4);for(let w=16;w<80;w++){const I=Ee[w-15]|0,b=Ae[w-15]|0,v=He(I,b,1)^He(I,b,8)^Sn(I,b,7),A=Re(I,b,1)^Re(I,b,8)^Bn(I,b,7),U=Ee[w-2]|0,C=Ae[w-2]|0,O=He(U,C,19)^ot(U,C,61)^Sn(U,C,6),k=Re(U,C,19)^at(U,C,61)^Bn(U,C,6),T=y1(A,k,Ae[w-7],Ae[w-16]),D=p1(T,v,O,Ee[w-7],Ee[w-16]);Ee[w]=D|0,Ae[w]=T|0}let{Ah:r,Al:i,Bh:s,Bl:a,Ch:o,Cl:f,Dh:l,Dl:c,Eh:d,El:h,Fh:m,Fl:F,Gh:g,Gl:u,Hh:p,Hl:x}=this;for(let w=0;w<80;w++){const I=He(d,h,14)^He(d,h,18)^ot(d,h,41),b=Re(d,h,14)^Re(d,h,18)^at(d,h,41),v=d&m^~d&g,A=h&F^~h&u,U=m1(x,b,A,B1[w],Ae[w]),C=v1(U,p,I,v,S1[w],Ee[w]),O=U|0,k=He(r,i,28)^ot(r,i,34)^ot(r,i,39),T=Re(r,i,28)^at(r,i,34)^at(r,i,39),D=r&s^r&o^s&o,y=i&a^i&f^a&f;p=g|0,x=u|0,g=m|0,u=F|0,m=d|0,F=h|0,{h:d,l:h}=he(l|0,c|0,C|0,O|0),l=o|0,c=f|0,o=s|0,f=a|0,s=r|0,a=i|0;const S=b1(O,T,y);r=w1(S,C,k,D),i=S|0}({h:r,l:i}=he(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:a}=he(this.Bh|0,this.Bl|0,s|0,a|0),{h:o,l:f}=he(this.Ch|0,this.Cl|0,o|0,f|0),{h:l,l:c}=he(this.Dh|0,this.Dl|0,l|0,c|0),{h:d,l:h}=he(this.Eh|0,this.El|0,d|0,h|0),{h:m,l:F}=he(this.Fh|0,this.Fl|0,m|0,F|0),{h:g,l:u}=he(this.Gh|0,this.Gl|0,g|0,u|0),{h:p,l:x}=he(this.Hh|0,this.Hl|0,p|0,x|0),this.set(r,i,s,a,o,f,l,c,d,h,m,F,g,u,p,x)}roundClean(){qe(Ee,Ae)}destroy(){qe(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class C1 extends $n{constructor(){super(48),this.Ah=j[0]|0,this.Al=j[1]|0,this.Bh=j[2]|0,this.Bl=j[3]|0,this.Ch=j[4]|0,this.Cl=j[5]|0,this.Dh=j[6]|0,this.Dl=j[7]|0,this.Eh=j[8]|0,this.El=j[9]|0,this.Fh=j[10]|0,this.Fl=j[11]|0,this.Gh=j[12]|0,this.Gl=j[13]|0,this.Hh=j[14]|0,this.Hl=j[15]|0}}const F1=tn(()=>new A1),U1=tn(()=>new $n),I1=tn(()=>new C1);class Jn extends Kn{constructor(n,e){super(),this.finished=!1,this.destroyed=!1,Yr(n);const r=en(e);if(this.iHash=n.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?n.create().update(r).digest():r);for(let a=0;a<s.length;a++)s[a]^=54;this.iHash.update(s),this.oHash=n.create();for(let a=0;a<s.length;a++)s[a]^=106;this.oHash.update(s),qe(s)}update(n){return bt(this),this.iHash.update(n),this}digestInto(n){bt(this),tt(n,this.outputLen),this.finished=!0,this.iHash.digestInto(n),this.oHash.update(n),this.oHash.digestInto(n),this.destroy()}digest(){const n=new Uint8Array(this.oHash.outputLen);return this.digestInto(n),n}_cloneInto(n){n||(n=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:i,destroyed:s,blockLen:a,outputLen:o}=this;return n=n,n.finished=i,n.destroyed=s,n.blockLen=a,n.outputLen=o,n.oHash=e._cloneInto(n.oHash),n.iHash=r._cloneInto(n.iHash),n}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Qn=(t,n,e)=>new Jn(t,n).update(e).digest();Qn.create=(t,n)=>new Jn(t,n);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Cn=BigInt(0),Zt=BigInt(1);function Lt(t,n){const e=n.negate();return t?e:n}function _n(t,n){if(!Number.isSafeInteger(t)||t<=0||t>n)throw new Error("invalid window size, expected [1.."+n+"], got W="+t)}function Tt(t,n){_n(t,n);const e=Math.ceil(n/t)+1,r=2**(t-1),i=2**t,s=pt(t),a=BigInt(t);return{windows:e,windowSize:r,mask:s,maxNumber:i,shiftBy:a}}function Fn(t,n,e){const{windowSize:r,mask:i,maxNumber:s,shiftBy:a}=e;let o=Number(t&i),f=t>>a;o>r&&(o-=s,f+=Zt);const l=n*r,c=l+Math.abs(o)-1,d=o===0,h=o<0,m=n%2!==0;return{nextN:f,offset:c,isZero:d,isNeg:h,isNegF:m,offsetF:l}}function k1(t,n){if(!Array.isArray(t))throw new Error("array expected");t.forEach((e,r)=>{if(!(e instanceof n))throw new Error("invalid point at index "+r)})}function L1(t,n){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((e,r)=>{if(!n.isValid(e))throw new Error("invalid scalar at index "+r)})}const Ot=new WeakMap,er=new WeakMap;function Nt(t){return er.get(t)||1}function T1(t,n){return{constTimeNegate:Lt,hasPrecomputes(e){return Nt(e)!==1},unsafeLadder(e,r,i=t.ZERO){let s=e;for(;r>Cn;)r&Zt&&(i=i.add(s)),s=s.double(),r>>=Zt;return i},precomputeWindow(e,r){const{windows:i,windowSize:s}=Tt(r,n),a=[];let o=e,f=o;for(let l=0;l<i;l++){f=o,a.push(f);for(let c=1;c<s;c++)f=f.add(o),a.push(f);o=f.double()}return a},wNAF(e,r,i){let s=t.ZERO,a=t.BASE;const o=Tt(e,n);for(let f=0;f<o.windows;f++){const{nextN:l,offset:c,isZero:d,isNeg:h,isNegF:m,offsetF:F}=Fn(i,f,o);i=l,d?a=a.add(Lt(m,r[F])):s=s.add(Lt(h,r[c]))}return{p:s,f:a}},wNAFUnsafe(e,r,i,s=t.ZERO){const a=Tt(e,n);for(let o=0;o<a.windows&&i!==Cn;o++){const{nextN:f,offset:l,isZero:c,isNeg:d}=Fn(i,o,a);if(i=f,!c){const h=r[l];s=s.add(d?h.negate():h)}}return s},getPrecomputes(e,r,i){let s=Ot.get(r);return s||(s=this.precomputeWindow(r,e),e!==1&&Ot.set(r,i(s))),s},wNAFCached(e,r,i){const s=Nt(e);return this.wNAF(s,this.getPrecomputes(s,e,i),r)},wNAFCachedUnsafe(e,r,i,s){const a=Nt(e);return a===1?this.unsafeLadder(e,r,s):this.wNAFUnsafe(a,this.getPrecomputes(a,e,i),r,s)},setWindowSize(e,r){_n(r,n),er.set(e,r),Ot.delete(e)}}}function O1(t,n,e,r){if(k1(e,t),L1(r,n),e.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,s=e1(BigInt(e.length)),a=s>12?s-3:s>4?s-2:s?2:1,o=pt(a),f=new Array(Number(o)+1).fill(i),l=Math.floor((n.BITS-1)/a)*a;let c=i;for(let d=l;d>=0;d-=a){f.fill(i);for(let m=0;m<r.length;m++){const F=r[m],g=Number(F>>BigInt(d)&o);f[g]=f[g].add(e[m])}let h=i;for(let m=f.length-1,F=i;m>0;m--)F=F.add(f[m]),h=h.add(F);if(c=c.add(h),d!==0)for(let m=0;m<a;m++)c=c.double()}return c}function tr(t){return o1(t.Fp),mt(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Gn(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Un(t){t.lowS!==void 0&&Je("lowS",t.lowS),t.prehash!==void 0&&Je("prehash",t.prehash)}function N1(t){const n=tr(t);mt(n,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:e,Fp:r,a:i}=n;if(e){if(!r.eql(i,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof e!="object"||typeof e.beta!="bigint"||typeof e.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...n})}class H1 extends Error{constructor(n=""){super(n)}}const ge={Err:H1,_tlv:{encode:(t,n)=>{const{Err:e}=ge;if(t<0||t>256)throw new e("tlv.encode: wrong tag");if(n.length&1)throw new e("tlv.encode: unpadded data");const r=n.length/2,i=ft(r);if(i.length/2&128)throw new e("tlv.encode: long form length too big");const s=r>127?ft(i.length/2|128):"";return ft(t)+s+i+n},decode(t,n){const{Err:e}=ge;let r=0;if(t<0||t>256)throw new e("tlv.encode: wrong tag");if(n.length<2||n[r++]!==t)throw new e("tlv.decode: wrong tlv");const i=n[r++],s=!!(i&128);let a=0;if(!s)a=i;else{const f=i&127;if(!f)throw new e("tlv.decode(long): indefinite length not supported");if(f>4)throw new e("tlv.decode(long): byte length is too big");const l=n.subarray(r,r+f);if(l.length!==f)throw new e("tlv.decode: length bytes not complete");if(l[0]===0)throw new e("tlv.decode(long): zero leftmost byte");for(const c of l)a=a<<8|c;if(r+=f,a<128)throw new e("tlv.decode(long): not minimal encoding")}const o=n.subarray(r,r+a);if(o.length!==a)throw new e("tlv.decode: wrong value length");return{v:o,l:n.subarray(r+a)}}},_int:{encode(t){const{Err:n}=ge;if(t<xe)throw new n("integer: negative integers are not allowed");let e=ft(t);if(Number.parseInt(e[0],16)&8&&(e="00"+e),e.length&1)throw new n("unexpected DER parsing assertion: unpadded hex");return e},decode(t){const{Err:n}=ge;if(t[0]&128)throw new n("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new n("invalid signature integer: unnecessary leading zero");return ke(t)}},toSig(t){const{Err:n,_int:e,_tlv:r}=ge,i=ie("signature",t),{v:s,l:a}=r.decode(48,i);if(a.length)throw new n("invalid signature: left bytes after parsing");const{v:o,l:f}=r.decode(2,s),{v:l,l:c}=r.decode(2,f);if(c.length)throw new n("invalid signature: left bytes after parsing");return{r:e.decode(o),s:e.decode(l)}},hexFromSig(t){const{_tlv:n,_int:e}=ge,r=n.encode(2,e.encode(t.r)),i=n.encode(2,e.encode(t.s)),s=r+i;return n.encode(48,s)}},xe=BigInt(0),G=BigInt(1);BigInt(2);const In=BigInt(3);BigInt(4);function R1(t){const n=N1(t),{Fp:e}=n,r=nt(n.n,n.nBitLength),i=n.toBytes||((g,u,p)=>{const x=u.toAffine();return yt(Uint8Array.from([4]),e.toBytes(x.x),e.toBytes(x.y))}),s=n.fromBytes||(g=>{const u=g.subarray(1),p=e.fromBytes(u.subarray(0,e.BYTES)),x=e.fromBytes(u.subarray(e.BYTES,2*e.BYTES));return{x:p,y:x}});function a(g){const{a:u,b:p}=n,x=e.sqr(g),w=e.mul(x,g);return e.add(e.add(w,e.mul(g,u)),p)}if(!e.eql(e.sqr(n.Gy),a(n.Gx)))throw new Error("bad generator point: equation left != right");function o(g){return fn(g,G,n.n)}function f(g){const{allowedPrivateKeyLengths:u,nByteLength:p,wrapPrivateKey:x,n:w}=n;if(u&&typeof g!="bigint"){if(Me(g)&&(g=Qe(g)),typeof g!="string"||!u.includes(g.length))throw new Error("invalid private key");g=g.padStart(p*2,"0")}let I;try{I=typeof g=="bigint"?g:ke(ie("private key",g,p))}catch{throw new Error("invalid private key, expected hex or "+p+" bytes, got "+typeof g)}return x&&(I=ne(I,w)),De("private key",I,G,w),I}function l(g){if(!(g instanceof h))throw new Error("ProjectivePoint expected")}const c=pn((g,u)=>{const{px:p,py:x,pz:w}=g;if(e.eql(w,e.ONE))return{x:p,y:x};const I=g.is0();u==null&&(u=I?e.ONE:e.inv(w));const b=e.mul(p,u),v=e.mul(x,u),A=e.mul(w,u);if(I)return{x:e.ZERO,y:e.ZERO};if(!e.eql(A,e.ONE))throw new Error("invZ was invalid");return{x:b,y:v}}),d=pn(g=>{if(g.is0()){if(n.allowInfinityPoint&&!e.is0(g.py))return;throw new Error("bad point: ZERO")}const{x:u,y:p}=g.toAffine();if(!e.isValid(u)||!e.isValid(p))throw new Error("bad point: x or y not FE");const x=e.sqr(p),w=a(u);if(!e.eql(x,w))throw new Error("bad point: equation left != right");if(!g.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(u,p,x){if(u==null||!e.isValid(u))throw new Error("x required");if(p==null||!e.isValid(p)||e.is0(p))throw new Error("y required");if(x==null||!e.isValid(x))throw new Error("z required");this.px=u,this.py=p,this.pz=x,Object.freeze(this)}static fromAffine(u){const{x:p,y:x}=u||{};if(!u||!e.isValid(p)||!e.isValid(x))throw new Error("invalid affine point");if(u instanceof h)throw new Error("projective point not allowed");const w=I=>e.eql(I,e.ZERO);return w(p)&&w(x)?h.ZERO:new h(p,x,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(u){const p=Vn(e,u.map(x=>x.pz));return u.map((x,w)=>x.toAffine(p[w])).map(h.fromAffine)}static fromHex(u){const p=h.fromAffine(s(ie("pointHex",u)));return p.assertValidity(),p}static fromPrivateKey(u){return h.BASE.multiply(f(u))}static msm(u,p){return O1(h,r,u,p)}_setWindowSize(u){F.setWindowSize(this,u)}assertValidity(){d(this)}hasEvenY(){const{y:u}=this.toAffine();if(e.isOdd)return!e.isOdd(u);throw new Error("Field doesn't support isOdd")}equals(u){l(u);const{px:p,py:x,pz:w}=this,{px:I,py:b,pz:v}=u,A=e.eql(e.mul(p,v),e.mul(I,w)),U=e.eql(e.mul(x,v),e.mul(b,w));return A&&U}negate(){return new h(this.px,e.neg(this.py),this.pz)}double(){const{a:u,b:p}=n,x=e.mul(p,In),{px:w,py:I,pz:b}=this;let v=e.ZERO,A=e.ZERO,U=e.ZERO,C=e.mul(w,w),O=e.mul(I,I),k=e.mul(b,b),T=e.mul(w,I);return T=e.add(T,T),U=e.mul(w,b),U=e.add(U,U),v=e.mul(u,U),A=e.mul(x,k),A=e.add(v,A),v=e.sub(O,A),A=e.add(O,A),A=e.mul(v,A),v=e.mul(T,v),U=e.mul(x,U),k=e.mul(u,k),T=e.sub(C,k),T=e.mul(u,T),T=e.add(T,U),U=e.add(C,C),C=e.add(U,C),C=e.add(C,k),C=e.mul(C,T),A=e.add(A,C),k=e.mul(I,b),k=e.add(k,k),C=e.mul(k,T),v=e.sub(v,C),U=e.mul(k,O),U=e.add(U,U),U=e.add(U,U),new h(v,A,U)}add(u){l(u);const{px:p,py:x,pz:w}=this,{px:I,py:b,pz:v}=u;let A=e.ZERO,U=e.ZERO,C=e.ZERO;const O=n.a,k=e.mul(n.b,In);let T=e.mul(p,I),D=e.mul(x,b),y=e.mul(w,v),S=e.add(p,x),E=e.add(I,b);S=e.mul(S,E),E=e.add(T,D),S=e.sub(S,E),E=e.add(p,w);let N=e.add(I,v);return E=e.mul(E,N),N=e.add(T,y),E=e.sub(E,N),N=e.add(x,w),A=e.add(b,v),N=e.mul(N,A),A=e.add(D,y),N=e.sub(N,A),C=e.mul(O,E),A=e.mul(k,y),C=e.add(A,C),A=e.sub(D,C),C=e.add(D,C),U=e.mul(A,C),D=e.add(T,T),D=e.add(D,T),y=e.mul(O,y),E=e.mul(k,E),D=e.add(D,y),y=e.sub(T,y),y=e.mul(O,y),E=e.add(E,y),T=e.mul(D,E),U=e.add(U,T),T=e.mul(N,E),A=e.mul(S,A),A=e.sub(A,T),T=e.mul(S,D),C=e.mul(N,C),C=e.add(C,T),new h(A,U,C)}subtract(u){return this.add(u.negate())}is0(){return this.equals(h.ZERO)}wNAF(u){return F.wNAFCached(this,u,h.normalizeZ)}multiplyUnsafe(u){const{endo:p,n:x}=n;De("scalar",u,xe,x);const w=h.ZERO;if(u===xe)return w;if(this.is0()||u===G)return this;if(!p||F.hasPrecomputes(this))return F.wNAFCachedUnsafe(this,u,h.normalizeZ);let{k1neg:I,k1:b,k2neg:v,k2:A}=p.splitScalar(u),U=w,C=w,O=this;for(;b>xe||A>xe;)b&G&&(U=U.add(O)),A&G&&(C=C.add(O)),O=O.double(),b>>=G,A>>=G;return I&&(U=U.negate()),v&&(C=C.negate()),C=new h(e.mul(C.px,p.beta),C.py,C.pz),U.add(C)}multiply(u){const{endo:p,n:x}=n;De("scalar",u,G,x);let w,I;if(p){const{k1neg:b,k1:v,k2neg:A,k2:U}=p.splitScalar(u);let{p:C,f:O}=this.wNAF(v),{p:k,f:T}=this.wNAF(U);C=F.constTimeNegate(b,C),k=F.constTimeNegate(A,k),k=new h(e.mul(k.px,p.beta),k.py,k.pz),w=C.add(k),I=O.add(T)}else{const{p:b,f:v}=this.wNAF(u);w=b,I=v}return h.normalizeZ([w,I])[0]}multiplyAndAddUnsafe(u,p,x){const w=h.BASE,I=(v,A)=>A===xe||A===G||!v.equals(w)?v.multiplyUnsafe(A):v.multiply(A),b=I(this,p).add(I(u,x));return b.is0()?void 0:b}toAffine(u){return c(this,u)}isTorsionFree(){const{h:u,isTorsionFree:p}=n;if(u===G)return!0;if(p)return p(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:u,clearCofactor:p}=n;return u===G?this:p?p(h,this):this.multiplyUnsafe(n.h)}toRawBytes(u=!0){return Je("isCompressed",u),this.assertValidity(),i(h,this,u)}toHex(u=!0){return Je("isCompressed",u),Qe(this.toRawBytes(u))}}h.BASE=new h(n.Gx,n.Gy,e.ONE),h.ZERO=new h(e.ZERO,e.ONE,e.ZERO);const m=n.nBitLength,F=T1(h,n.endo?Math.ceil(m/2):m);return{CURVE:n,ProjectivePoint:h,normPrivateKeyToScalar:f,weierstrassEquation:a,isWithinCurveOrder:o}}function D1(t){const n=tr(t);return mt(n,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...n})}function P1(t){const n=D1(t),{Fp:e,n:r}=n,i=e.BYTES+1,s=2*e.BYTES+1;function a(y){return ne(y,r)}function o(y){return zt(y,r)}const{ProjectivePoint:f,normPrivateKeyToScalar:l,weierstrassEquation:c,isWithinCurveOrder:d}=R1({...n,toBytes(y,S,E){const N=S.toAffine(),H=e.toBytes(N.x),P=yt;return Je("isCompressed",E),E?P(Uint8Array.from([S.hasEvenY()?2:3]),H):P(Uint8Array.from([4]),H,e.toBytes(N.y))},fromBytes(y){const S=y.length,E=y[0],N=y.subarray(1);if(S===i&&(E===2||E===3)){const H=ke(N);if(!fn(H,G,e.ORDER))throw new Error("Point is not on curve");const P=c(H);let Z;try{Z=e.sqrt(P)}catch(q){const z=q instanceof Error?": "+q.message:"";throw new Error("Point is not on curve"+z)}const V=(Z&G)===G;return(E&1)===1!==V&&(Z=e.neg(Z)),{x:H,y:Z}}else if(S===s&&E===4){const H=e.fromBytes(N.subarray(0,e.BYTES)),P=e.fromBytes(N.subarray(e.BYTES,2*e.BYTES));return{x:H,y:P}}else{const H=i,P=s;throw new Error("invalid Point, expected length of "+H+", or uncompressed "+P+", got "+S)}}}),h=y=>Qe(_e(y,n.nByteLength));function m(y){const S=r>>G;return y>S}function F(y){return m(y)?a(-y):y}const g=(y,S,E)=>ke(y.slice(S,E));class u{constructor(S,E,N){De("r",S,G,r),De("s",E,G,r),this.r=S,this.s=E,N!=null&&(this.recovery=N),Object.freeze(this)}static fromCompact(S){const E=n.nByteLength;return S=ie("compactSignature",S,E*2),new u(g(S,0,E),g(S,E,2*E))}static fromDER(S){const{r:E,s:N}=ge.toSig(ie("DER",S));return new u(E,N)}assertValidity(){}addRecoveryBit(S){return new u(this.r,this.s,S)}recoverPublicKey(S){const{r:E,s:N,recovery:H}=this,P=v(ie("msgHash",S));if(H==null||![0,1,2,3].includes(H))throw new Error("recovery id invalid");const Z=H===2||H===3?E+n.n:E;if(Z>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");const V=(H&1)===0?"02":"03",Q=f.fromHex(V+h(Z)),q=o(Z),z=a(-P*q),le=a(N*q),pe=f.BASE.multiplyAndAddUnsafe(Q,z,le);if(!pe)throw new Error("point at infinify");return pe.assertValidity(),pe}hasHighS(){return m(this.s)}normalizeS(){return this.hasHighS()?new u(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return wt(this.toDERHex())}toDERHex(){return ge.hexFromSig(this)}toCompactRawBytes(){return wt(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const p={isValidPrivateKey(y){try{return l(y),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const y=Xn(n.n);return l1(n.randomBytes(y),n.n)},precompute(y=8,S=f.BASE){return S._setWindowSize(y),S.multiply(BigInt(3)),S}};function x(y,S=!0){return f.fromPrivateKey(y).toRawBytes(S)}function w(y){const S=Me(y),E=typeof y=="string",N=(S||E)&&y.length;return S?N===i||N===s:E?N===2*i||N===2*s:y instanceof f}function I(y,S,E=!0){if(w(y))throw new Error("first arg must be private key");if(!w(S))throw new Error("second arg must be public key");return f.fromHex(S).multiply(l(y)).toRawBytes(E)}const b=n.bits2int||function(y){if(y.length>8192)throw new Error("input is too large");const S=ke(y),E=y.length*8-n.nBitLength;return E>0?S>>BigInt(E):S},v=n.bits2int_modN||function(y){return a(b(y))},A=pt(n.nBitLength);function U(y){return De("num < 2^"+n.nBitLength,y,xe,A),_e(y,n.nByteLength)}function C(y,S,E=O){if(["recovered","canonical"].some(Be=>Be in E))throw new Error("sign() legacy options not supported");const{hash:N,randomBytes:H}=n;let{lowS:P,prehash:Z,extraEntropy:V}=E;P==null&&(P=!0),y=ie("msgHash",y),Un(E),Z&&(y=ie("prehashed msgHash",N(y)));const Q=v(y),q=l(S),z=[U(q),U(Q)];if(V!=null&&V!==!1){const Be=V===!0?H(e.BYTES):V;z.push(ie("extraEntropy",Be))}const le=yt(...z),pe=Q;function vt(Be){const Te=b(Be);if(!d(Te))return;const Et=o(Te),ze=f.BASE.multiply(Te).toAffine(),Ce=a(ze.x);if(Ce===xe)return;const Ze=a(Et*a(pe+Ce*q));if(Ze===xe)return;let Oe=(ze.x===Ce?0:2)|Number(ze.y&G),an=Ze;return P&&m(Ze)&&(an=F(Ze),Oe^=1),new u(Ce,an,Oe)}return{seed:le,k2sig:vt}}const O={lowS:n.lowS,prehash:!1},k={lowS:n.lowS,prehash:!1};function T(y,S,E=O){const{seed:N,k2sig:H}=C(y,S,E),P=n;return t1(P.hash.outputLen,P.nByteLength,P.hmac)(N,H)}f.BASE._setWindowSize(8);function D(y,S,E,N=k){const H=y;S=ie("msgHash",S),E=ie("publicKey",E);const{lowS:P,prehash:Z,format:V}=N;if(Un(N),"strict"in N)throw new Error("options.strict was renamed to lowS");if(V!==void 0&&V!=="compact"&&V!=="der")throw new Error("format must be compact or der");const Q=typeof H=="string"||Me(H),q=!Q&&!V&&typeof H=="object"&&H!==null&&typeof H.r=="bigint"&&typeof H.s=="bigint";if(!Q&&!q)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let z,le;try{if(q&&(z=new u(H.r,H.s)),Q){try{V!=="compact"&&(z=u.fromDER(H))}catch(Oe){if(!(Oe instanceof ge.Err))throw Oe}!z&&V!=="der"&&(z=u.fromCompact(H))}le=f.fromHex(E)}catch{return!1}if(!z||P&&z.hasHighS())return!1;Z&&(S=n.hash(S));const{r:pe,s:vt}=z,Be=v(S),Te=o(vt),Et=a(Be*Te),ze=a(pe*Te),Ce=f.BASE.multiplyAndAddUnsafe(le,Et,ze)?.toAffine();return Ce?a(Ce.x)===pe:!1}return{CURVE:n,getPublicKey:x,getSharedSecret:I,sign:T,verify:D,ProjectivePoint:f,Signature:u,utils:p}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function K1(t){return{hash:t,hmac:(n,...e)=>Qn(t,n,Jr(...e)),randomBytes:Qr}}function sn(t,n){const e=r=>P1({...t,...K1(r)});return{...e(n),create:e}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const nr=nt(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),q1=nr.create(BigInt("-3")),M1=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),z1=sn({a:q1,b:M1,Fp:nr,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},F1),rr=nt(BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff")),Z1=rr.create(BigInt("-3")),V1=BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef");sn({a:Z1,b:V1,Fp:rr,n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f"),h:BigInt(1),lowS:!1},I1);const ir=nt(BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff")),G1=ir.create(BigInt("-3")),j1=BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00");sn({a:G1,b:j1,Fp:ir,n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650"),h:BigInt(1),lowS:!1,allowedPrivateKeyLengths:[130,131,132]},U1);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const fr=z1,B=new Proxy({},{get:(t,n)=>typeof n=="string"&&/^[\w$]+$/.test(n)?document.getElementById(n):void 0});function X1(){document.querySelectorAll("button:not(form button)").forEach(e=>{e.setAttribute("type","button")}),document.querySelectorAll("form button").forEach(e=>{e.setAttribute("type","submit")})}function ye(t,n){const e=localStorage.getItem(t);return e?JSON.parse(e):n}function fe(t,n){n===""||Array.isArray(n)&&n.length===0?localStorage.removeItem(t):localStorage.setItem(t,JSON.stringify(n))}function kn(t,n,e=-1){let r=ye(t,[]);e===-1?r.push(n):n?r[e]=n:r.length>0&&r.splice(e,1),fe(t,r)}function Y1(){localStorage.clear()}function sr(t,n,e,r=()=>{}){const i=ye(t,n);for(const[s,a]of Object.entries(e))if(i===s)return r(a);fe(t,n)}function or(t,n={},e={},r=null){const i=Object.assign(document.createElement(t),n);return Object.assign(i.style,e),r&&r.appendChild(i),i}function Vt(t,n){const e=new Blob([t],{type:"text/plain"}),r=URL.createObjectURL(e);or("a",{href:r,download:n}).click(),URL.revokeObjectURL(r)}async function W1(t){const n=await window.crypto.subtle.exportKey("jwk",t.publicKey),e=await window.crypto.subtle.exportKey("jwk",t.privateKey),r=crypto.randomUUID();Vt(JSON.stringify(n),"public_"+r),Vt(JSON.stringify(e),"private_"+r)}async function $1(){const t=await window.crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"]);await W1(t)}function J1(){const t={};for(let n=0;n<localStorage.length;n++){const e=localStorage.key(n),r=localStorage.getItem(e);t[e]=JSON.parse(r)}Vt(JSON.stringify(t),"config.json")}function Q1(){return new Promise(t=>{const n=or("input",{type:"file"});n.onchange=e=>{const r=e.target.files[0],i=new FileReader;i.onload=s=>{t(s.target.result)},i.readAsText(r)},n.click()})}function ar(t){return new Promise(n=>{const e=t.files;if(e&&e.length>0){const r=e[0],i=new FileReader;i.onload=function(s){n(s.target.result)},i.readAsText(r)}else n(null)})}async function _1(){const t=JSON.parse(await Q1());Y1();for(const[n,e]of Object.entries(t))fe(n,e)}function e0(){document.querySelectorAll('input[name="theme-dropdown"]').forEach(n=>{n.addEventListener("change",function(e){e.target.checked&&fe("theme",e.target.value)})})}function t0(t,n=0,e=t.length){for(let r=e-1;r>n;r--){const i=Math.floor(Math.random()*(r-n+1))+n;[t[r],t[i]]=[t[i],t[r]]}return t}function cr(t){return new ReadableStream({start(n){n.enqueue(t),n.close()}})}async function lr(t){const n=t.getReader(),e=[];for(;;){const{done:s,value:a}=await n.read();if(s)break;e.push(a)}const r=new Uint8Array(e.reduce((s,a)=>s+a.length,0));let i=0;for(const s of e)r.set(s,i),i+=s.length;return r}async function n0(t,n="deflate-raw"){return await lr(cr(t).pipeThrough(new CompressionStream(n)))}async function r0(t,n="deflate-raw"){return await lr(cr(t).pipeThrough(new DecompressionStream(n)))}const i0=new TextEncoder,f0=new TextDecoder,dr=new Uint8Array([0,64,128,0,192]),hr=new Uint8Array([2,2,2,0,2]),ur=[" the "," and ","tion"," with","ing","ment","https://"],gr=["tfff-of-tfTtf:rf:rf.fffZ","tfff-of-tf","(fff) fff-ffff","tf:rf:rf",0];async function s0(t){let n=new Uint8Array(t.length*4);const e=Jt(t,t.length,n,dr,hr,ur,gr),r=n.subarray(0,e),i=await n0(i0.encode(t));return r.length<i.length?[r,1]:[i,0]}async function o0(t){let n;try{n=f0.decode(await r0(t))}catch{n=$e(t,t.length,null,dr,hr,ur,gr)}return n}function a0(t){if(!(t instanceof Uint8Array)||t.length!==65||t[0]!==4)throw new Error("Invalid uncompressed public key format");return fr.ProjectivePoint.fromHex(t).toRawBytes(!0)}function c0(t){if(!(t instanceof Uint8Array)||t.length!==33||t[0]!==2&&t[0]!==3)throw new Error("Invalid compressed public key format");return fr.ProjectivePoint.fromHex(t).toRawBytes(!1)}async function l0(t,n){const e=await crypto.subtle.importKey("jwk",n,{name:"ECDH",namedCurve:"P-256"},!1,[]),r=await crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"]);let i=new Uint8Array(await crypto.subtle.exportKey("raw",r.publicKey));i=a0(i);const s=await crypto.subtle.deriveKey({name:"ECDH",public:e},r.privateKey,{name:"AES-GCM",length:256},!1,["encrypt"]),a=crypto.getRandomValues(new Uint8Array(12)),o=await crypto.subtle.encrypt({name:"AES-GCM",iv:a},s,t),f=new Uint8Array(o),l=i.length+a.length+f.length,c=new Uint8Array(l);return c.set(i,0),c.set(a,i.length),c.set(f,i.length+a.length),c}async function d0(t,n){try{const e=await crypto.subtle.importKey("jwk",n,{name:"ECDH",namedCurve:"P-256"},!1,["deriveKey"]),r=33,i=12,s=t.slice(0,r),a=t.slice(r,r+i),o=t.slice(r+i),f=c0(s),l=await crypto.subtle.importKey("raw",f,{name:"ECDH",namedCurve:"P-256"},!1,[]),c=await crypto.subtle.deriveKey({name:"ECDH",public:l},e,{name:"AES-GCM",length:256},!1,["decrypt"]),d=await crypto.subtle.decrypt({name:"AES-GCM",iv:a},c,o);return new Uint8Array(d)}catch(e){throw new Error(`Decryption failed: ${e.message}`)}}async function h0(t){return(await(await fetch("http://127.0.0.1:8090/tokenize",{method:"POST",body:JSON.stringify({content:t})})).json()).tokens}async function u0(t){return(await(await fetch("http://127.0.0.1:8090/detokenize",{method:"POST",body:JSON.stringify({tokens:t})})).json()).content}function Ln(t){let n=[];for(let e of t)for(let r=7;r>=0;r--)n.push(e>>r&1);return n}function Tn(t){let n=new Uint8Array(t.length/8),e=0;for(let r=0;r<t.length;r+=8)n[e++]=t[r]*128+t[r+1]*64+t[r+2]*32+t[r+3]*16+t[r+4]*8+t[r+5]*4+t[r+6]*2+t[r+7];return n}const g0=new Set([8203,8204,8205,65279,8206,8207,1564,6158,173,8288,8289,8290,8291,8292,1536,1537,1538,1539,1540,1757,1807,2274,69821,69837]),x0=[[8234,8238],[8294,8303],[65529,65531],[113824,113827],[119141,119145],[119155,119162],[917504,917631]];function b0(t){if(g0.has(t))return!0;for(const[n,e]of x0)if(t>=n&&t<=e)return!0;return!1}function w0(t){for(const n of t)if(b0(n.codePointAt(0)))return!0;return!1}function y0(t,n){const e=n.length;for(let r=0;r<=t.length-e;r++)if(t.slice(r,r+e).every((s,a)=>s===n[a]))return r;return-1}const p0={includeChars:[" ","　"],charRanges:[],includeSubstrings:[`\r
`,` 
`]};function m0(t,n={}){const e={...p0,...n};return!t||w0(t)||e.includeChars.some(a=>t.includes(a))||e.charRanges.some(([a,o])=>new RegExp(`[${a}-${o}]`).test(t))?!1:!e.includeSubstrings.some(a=>t.includes(a))}const v0=new Uint8Array([0,97,115,109,1,0,0,0,1,48,8,96,3,127,127,127,1,127,96,3,127,127,127,0,96,2,127,127,0,96,1,127,1,127,96,3,127,127,126,1,126,96,3,126,127,127,1,126,96,2,127,126,0,96,1,127,1,126,3,11,10,0,0,2,1,3,4,5,6,1,7,5,3,1,0,1,7,85,9,3,109,101,109,2,0,5,120,120,104,51,50,0,0,6,105,110,105,116,51,50,0,2,8,117,112,100,97,116,101,51,50,0,3,8,100,105,103,101,115,116,51,50,0,4,5,120,120,104,54,52,0,5,6,105,110,105,116,54,52,0,7,8,117,112,100,97,116,101,54,52,0,8,8,100,105,103,101,115,116,54,52,0,9,10,251,22,10,242,1,1,4,127,32,0,32,1,106,33,3,32,1,65,16,79,4,127,32,3,65,16,107,33,6,32,2,65,168,136,141,161,2,106,33,3,32,2,65,137,235,208,208,7,107,33,4,32,2,65,207,140,162,142,6,106,33,5,3,64,32,3,32,0,40,2,0,65,247,148,175,175,120,108,106,65,13,119,65,177,243,221,241,121,108,33,3,32,4,32,0,65,4,106,34,0,40,2,0,65,247,148,175,175,120,108,106,65,13,119,65,177,243,221,241,121,108,33,4,32,2,32,0,65,4,106,34,0,40,2,0,65,247,148,175,175,120,108,106,65,13,119,65,177,243,221,241,121,108,33,2,32,5,32,0,65,4,106,34,0,40,2,0,65,247,148,175,175,120,108,106,65,13,119,65,177,243,221,241,121,108,33,5,32,6,32,0,65,4,106,34,0,79,13,0,11,32,2,65,12,119,32,5,65,18,119,106,32,4,65,7,119,106,32,3,65,1,119,106,5,32,2,65,177,207,217,178,1,106,11,32,1,106,32,0,32,1,65,15,113,16,1,11,146,1,0,32,1,32,2,106,33,2,3,64,32,1,65,4,106,32,2,75,69,4,64,32,0,32,1,40,2,0,65,189,220,202,149,124,108,106,65,17,119,65,175,214,211,190,2,108,33,0,32,1,65,4,106,33,1,12,1,11,11,3,64,32,1,32,2,79,69,4,64,32,0,32,1,45,0,0,65,177,207,217,178,1,108,106,65,11,119,65,177,243,221,241,121,108,33,0,32,1,65,1,106,33,1,12,1,11,11,32,0,32,0,65,15,118,115,65,247,148,175,175,120,108,34,0,65,13,118,32,0,115,65,189,220,202,149,124,108,34,0,65,16,118,32,0,115,11,63,0,32,0,65,8,106,32,1,65,168,136,141,161,2,106,54,2,0,32,0,65,12,106,32,1,65,137,235,208,208,7,107,54,2,0,32,0,65,16,106,32,1,54,2,0,32,0,65,20,106,32,1,65,207,140,162,142,6,106,54,2,0,11,195,4,1,6,127,32,1,32,2,106,33,6,32,0,65,24,106,33,4,32,0,65,40,106,40,2,0,33,3,32,0,32,0,40,2,0,32,2,106,54,2,0,32,0,65,4,106,34,5,32,5,40,2,0,32,2,65,16,79,32,0,40,2,0,65,16,79,114,114,54,2,0,32,2,32,3,106,65,16,73,4,64,32,3,32,4,106,32,1,32,2,252,10,0,0,32,0,65,40,106,32,2,32,3,106,54,2,0,15,11,32,3,4,64,32,3,32,4,106,32,1,65,16,32,3,107,34,2,252,10,0,0,32,0,65,8,106,34,3,32,3,40,2,0,32,4,40,2,0,65,247,148,175,175,120,108,106,65,13,119,65,177,243,221,241,121,108,54,2,0,32,0,65,12,106,34,3,32,3,40,2,0,32,4,65,4,106,40,2,0,65,247,148,175,175,120,108,106,65,13,119,65,177,243,221,241,121,108,54,2,0,32,0,65,16,106,34,3,32,3,40,2,0,32,4,65,8,106,40,2,0,65,247,148,175,175,120,108,106,65,13,119,65,177,243,221,241,121,108,54,2,0,32,0,65,20,106,34,3,32,3,40,2,0,32,4,65,12,106,40,2,0,65,247,148,175,175,120,108,106,65,13,119,65,177,243,221,241,121,108,54,2,0,32,0,65,40,106,65,0,54,2,0,32,1,32,2,106,33,1,11,32,1,32,6,65,16,107,77,4,64,32,6,65,16,107,33,8,32,0,65,8,106,40,2,0,33,2,32,0,65,12,106,40,2,0,33,3,32,0,65,16,106,40,2,0,33,5,32,0,65,20,106,40,2,0,33,7,3,64,32,2,32,1,40,2,0,65,247,148,175,175,120,108,106,65,13,119,65,177,243,221,241,121,108,33,2,32,3,32,1,65,4,106,34,1,40,2,0,65,247,148,175,175,120,108,106,65,13,119,65,177,243,221,241,121,108,33,3,32,5,32,1,65,4,106,34,1,40,2,0,65,247,148,175,175,120,108,106,65,13,119,65,177,243,221,241,121,108,33,5,32,7,32,1,65,4,106,34,1,40,2,0,65,247,148,175,175,120,108,106,65,13,119,65,177,243,221,241,121,108,33,7,32,8,32,1,65,4,106,34,1,79,13,0,11,32,0,65,8,106,32,2,54,2,0,32,0,65,12,106,32,3,54,2,0,32,0,65,16,106,32,5,54,2,0,32,0,65,20,106,32,7,54,2,0,11,32,1,32,6,73,4,64,32,4,32,1,32,6,32,1,107,34,1,252,10,0,0,32,0,65,40,106,32,1,54,2,0,11,11,97,1,1,127,32,0,65,16,106,40,2,0,33,1,32,0,65,4,106,40,2,0,4,127,32,1,65,12,119,32,0,65,20,106,40,2,0,65,18,119,106,32,0,65,12,106,40,2,0,65,7,119,106,32,0,65,8,106,40,2,0,65,1,119,106,5,32,1,65,177,207,217,178,1,106,11,32,0,40,2,0,106,32,0,65,24,106,32,0,65,40,106,40,2,0,16,1,11,255,3,2,3,126,1,127,32,0,32,1,106,33,6,32,1,65,32,79,4,126,32,6,65,32,107,33,6,32,2,66,214,235,130,238,234,253,137,245,224,0,124,33,3,32,2,66,177,169,172,193,173,184,212,166,61,125,33,4,32,2,66,249,234,208,208,231,201,161,228,225,0,124,33,5,3,64,32,3,32,0,41,3,0,66,207,214,211,190,210,199,171,217,66,126,124,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,33,3,32,4,32,0,65,8,106,34,0,41,3,0,66,207,214,211,190,210,199,171,217,66,126,124,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,33,4,32,2,32,0,65,8,106,34,0,41,3,0,66,207,214,211,190,210,199,171,217,66,126,124,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,33,2,32,5,32,0,65,8,106,34,0,41,3,0,66,207,214,211,190,210,199,171,217,66,126,124,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,33,5,32,6,32,0,65,8,106,34,0,79,13,0,11,32,2,66,12,137,32,5,66,18,137,124,32,4,66,7,137,124,32,3,66,1,137,124,32,3,66,207,214,211,190,210,199,171,217,66,126,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,133,66,135,149,175,175,152,182,222,155,158,127,126,66,157,163,181,234,131,177,141,138,250,0,125,32,4,66,207,214,211,190,210,199,171,217,66,126,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,133,66,135,149,175,175,152,182,222,155,158,127,126,66,157,163,181,234,131,177,141,138,250,0,125,32,2,66,207,214,211,190,210,199,171,217,66,126,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,133,66,135,149,175,175,152,182,222,155,158,127,126,66,157,163,181,234,131,177,141,138,250,0,125,32,5,66,207,214,211,190,210,199,171,217,66,126,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,133,66,135,149,175,175,152,182,222,155,158,127,126,66,157,163,181,234,131,177,141,138,250,0,125,5,32,2,66,197,207,217,178,241,229,186,234,39,124,11,32,1,173,124,32,0,32,1,65,31,113,16,6,11,134,2,0,32,1,32,2,106,33,2,3,64,32,2,32,1,65,8,106,79,4,64,32,1,41,3,0,66,207,214,211,190,210,199,171,217,66,126,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,32,0,133,66,27,137,66,135,149,175,175,152,182,222,155,158,127,126,66,157,163,181,234,131,177,141,138,250,0,125,33,0,32,1,65,8,106,33,1,12,1,11,11,32,1,65,4,106,32,2,77,4,64,32,0,32,1,53,2,0,66,135,149,175,175,152,182,222,155,158,127,126,133,66,23,137,66,207,214,211,190,210,199,171,217,66,126,66,249,243,221,241,153,246,153,171,22,124,33,0,32,1,65,4,106,33,1,11,3,64,32,1,32,2,73,4,64,32,0,32,1,49,0,0,66,197,207,217,178,241,229,186,234,39,126,133,66,11,137,66,135,149,175,175,152,182,222,155,158,127,126,33,0,32,1,65,1,106,33,1,12,1,11,11,32,0,32,0,66,33,136,133,66,207,214,211,190,210,199,171,217,66,126,34,0,32,0,66,29,136,133,66,249,243,221,241,153,246,153,171,22,126,34,0,32,0,66,32,136,133,11,77,0,32,0,65,8,106,32,1,66,214,235,130,238,234,253,137,245,224,0,124,55,3,0,32,0,65,16,106,32,1,66,177,169,172,193,173,184,212,166,61,125,55,3,0,32,0,65,24,106,32,1,55,3,0,32,0,65,32,106,32,1,66,249,234,208,208,231,201,161,228,225,0,124,55,3,0,11,244,4,2,3,127,4,126,32,1,32,2,106,33,5,32,0,65,40,106,33,4,32,0,65,200,0,106,40,2,0,33,3,32,0,32,0,41,3,0,32,2,173,124,55,3,0,32,2,32,3,106,65,32,73,4,64,32,3,32,4,106,32,1,32,2,252,10,0,0,32,0,65,200,0,106,32,2,32,3,106,54,2,0,15,11,32,3,4,64,32,3,32,4,106,32,1,65,32,32,3,107,34,2,252,10,0,0,32,0,65,8,106,34,3,32,3,41,3,0,32,4,41,3,0,66,207,214,211,190,210,199,171,217,66,126,124,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,55,3,0,32,0,65,16,106,34,3,32,3,41,3,0,32,4,65,8,106,41,3,0,66,207,214,211,190,210,199,171,217,66,126,124,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,55,3,0,32,0,65,24,106,34,3,32,3,41,3,0,32,4,65,16,106,41,3,0,66,207,214,211,190,210,199,171,217,66,126,124,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,55,3,0,32,0,65,32,106,34,3,32,3,41,3,0,32,4,65,24,106,41,3,0,66,207,214,211,190,210,199,171,217,66,126,124,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,55,3,0,32,0,65,200,0,106,65,0,54,2,0,32,1,32,2,106,33,1,11,32,1,65,32,106,32,5,77,4,64,32,5,65,32,107,33,2,32,0,65,8,106,41,3,0,33,6,32,0,65,16,106,41,3,0,33,7,32,0,65,24,106,41,3,0,33,8,32,0,65,32,106,41,3,0,33,9,3,64,32,6,32,1,41,3,0,66,207,214,211,190,210,199,171,217,66,126,124,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,33,6,32,7,32,1,65,8,106,34,1,41,3,0,66,207,214,211,190,210,199,171,217,66,126,124,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,33,7,32,8,32,1,65,8,106,34,1,41,3,0,66,207,214,211,190,210,199,171,217,66,126,124,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,33,8,32,9,32,1,65,8,106,34,1,41,3,0,66,207,214,211,190,210,199,171,217,66,126,124,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,33,9,32,2,32,1,65,8,106,34,1,79,13,0,11,32,0,65,8,106,32,6,55,3,0,32,0,65,16,106,32,7,55,3,0,32,0,65,24,106,32,8,55,3,0,32,0,65,32,106,32,9,55,3,0,11,32,1,32,5,73,4,64,32,4,32,1,32,5,32,1,107,34,1,252,10,0,0,32,0,65,200,0,106,32,1,54,2,0,11,11,188,2,1,5,126,32,0,65,24,106,41,3,0,33,1,32,0,41,3,0,34,2,66,32,90,4,126,32,0,65,8,106,41,3,0,34,3,66,1,137,32,0,65,16,106,41,3,0,34,4,66,7,137,124,32,1,66,12,137,32,0,65,32,106,41,3,0,34,5,66,18,137,124,124,32,3,66,207,214,211,190,210,199,171,217,66,126,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,133,66,135,149,175,175,152,182,222,155,158,127,126,66,157,163,181,234,131,177,141,138,250,0,125,32,4,66,207,214,211,190,210,199,171,217,66,126,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,133,66,135,149,175,175,152,182,222,155,158,127,126,66,157,163,181,234,131,177,141,138,250,0,125,32,1,66,207,214,211,190,210,199,171,217,66,126,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,133,66,135,149,175,175,152,182,222,155,158,127,126,66,157,163,181,234,131,177,141,138,250,0,125,32,5,66,207,214,211,190,210,199,171,217,66,126,66,31,137,66,135,149,175,175,152,182,222,155,158,127,126,133,66,135,149,175,175,152,182,222,155,158,127,126,66,157,163,181,234,131,177,141,138,250,0,125,5,32,1,66,197,207,217,178,241,229,186,234,39,124,11,32,2,124,32,0,65,40,106,32,2,66,31,131,167,16,6,11]);async function E0(){return function(t){const{exports:{mem:n,xxh32:e,xxh64:r,init32:i,update32:s,digest32:a,init64:o,update64:f,digest64:l}}=t;let c=new Uint8Array(n.buffer);function d(b,v){if(n.buffer.byteLength<b+v){const A=Math.ceil((b+v-n.buffer.byteLength)/65536);n.grow(A),c=new Uint8Array(n.buffer)}}function h(b,v,A,U,C,O){d(b);const k=new Uint8Array(b);return c.set(k),A(0,v),k.set(c.subarray(0,b)),{update(T){let D;return c.set(k),typeof T=="string"?(d(3*T.length,b),D=u.encodeInto(T,c.subarray(b)).written):(d(T.byteLength,b),c.set(T,b),D=T.byteLength),U(0,b,D),k.set(c.subarray(0,b)),this},digest:()=>(c.set(k),O(C(0)))}}function m(b){return b>>>0}const F=2n**64n-1n;function g(b){return b&F}const u=new TextEncoder,p=0,x=0n;function w(b,v=p){return d(3*b.length,0),m(e(0,u.encodeInto(b,c).written,v))}function I(b,v=x){return d(3*b.length,0),g(r(0,u.encodeInto(b,c).written,v))}return{h32:w,h32ToString:(b,v=p)=>w(b,v).toString(16).padStart(8,"0"),h32Raw:(b,v=p)=>(d(b.byteLength,0),c.set(b),m(e(0,b.byteLength,v))),create32:(b=p)=>h(48,b,i,s,a,m),h64:I,h64ToString:(b,v=x)=>I(b,v).toString(16).padStart(16,"0"),h64Raw:(b,v=x)=>(d(b.byteLength,0),c.set(b),g(r(0,b.byteLength,v))),create64:(b=x)=>h(88,b,o,f,l,g)}}((await WebAssembly.instantiate(v0)).instance)}const{h32:Gt}=await E0();function et(t=null,n=null){B.alertTitle.textContent=n,B.alertMsg.textContent=t,B.alert.showModal()}X1();const A0=document.querySelectorAll('input[name="theme-dropdown"]');function S0(t){[B.import.textContent,B.export.textContent,B.generateKeyPair.textContent,B.publicKeyTitle.textContent,B.privateKeyTitle.textContent,B.publicKey.ariaLabel,B.privateKey.ariaLabel,B.secret.placeholder,B.coverText.placeholder,B.prompt.placeholder,B.ok.textContent,B.github.ariaLabel,B.language.ariaLabel,B.theme.ariaLabel,B.hide.ariaLabel,B.extract.ariaLabel,B.save.ariaLabel,B.progress.ariaLabel,B.insertionText.textContent]=t}function xr(){sr("language","simplifiedChinese",{simplifiedChinese:["导入配置","导出配置","生成密钥","输入接收方的公钥（可选）","输入你的私钥（可选）","输入接收方的公钥（可选）","输入你的私钥（可选）","请输入需要加密的信息","请输入需要解密的掩饰文本",`请输入任务提示，例如："续写一段散文："
点击右侧的按钮可以保存当前任务提示`,"确定","Github","语言","主题","隐写","提取","保存","进度条","支持前后插入"],traditionalChinese:["導入配置","導出配置","生成密鑰","輸入接收方的公鑰（可選）","輸入你的私鑰（可選）","輸入接收方的公鑰（可選）","輸入你的私鑰（可選）","請輸入需要加密的信息","請輸入需要解密的掩飾文本",`請輸入任務提示，例如：「續寫一段散文：」
您可以通過右側的按鈕來儲存當前的提示模板。`,"確定","Github","語言","主題","隱寫","提取","保存","進度條","支持前後插入"],english:["Import Configuration","Export Configuration","Generate Key","Enter Recipient's Public Key (Optional)","Enter Your Private Key (Optional)","Enter Recipient's Public Key (Optional)","Enter Your Private Key (Optional)","Please Enter the Information to Encrypt","Please enter the disguised text to be decrypted",`Please enter a task prompt, for example: "Continue writing a prose passage:"
You can save the current prompt template using the button on the right.`,"Confirm","Github","Language","Theme","Steganography","Extract","Save","Progress Bar","Support Front and Back Insertion"]},t=>{S0(t)}),B.tooltip.setAttribute("data-tip",Ye("即使隐写暴露，也能确保原始信息不会被破解","即使隱寫暴露，也能確保原始信息不會被破解","Even if the Steganography is Exposed, It Ensures the Original Information Cannot Be Cracked")),B.tooltip2.setAttribute("data-tip",Ye("生成的掩饰文本嵌入到任意文本后仍能准确解密，略微增加隐写暴露的风险","生成的掩飾文本嵌入到任意文本後仍能準確解密，略微增加隱寫暴露的風險","The generated cover text can still be accurately decrypted after being embedded into any text, slightly increasing the risk of steganographic exposure")),B.tooltip3.setAttribute("data-tip",Ye("再次点击以停止隐写","再次點擊以停止隱寫","Click again to stop steganography"))}function Ye(...t){return sr("language","simplifiedChinese",{simplifiedChinese:t[0],traditionalChinese:t[1],english:t[2]},n=>n)}function B0(){const t=ye("theme","default");for(const n of A0)if(n.value===t){n.checked=!0;return}fe("theme","default")}function C0(){B.insertion.checked=ye("insertion",!0)}const F0=document.querySelectorAll('input[name="language-dropdown"]');F0.forEach(t=>{t.addEventListener("change",function(n){n.target.checked&&(fe("language",n.target.value),xr())})});B.insertion.addEventListener("change",function(t){fe("insertion",t.target.checked)});B.generateKeyPair.onclick=async()=>{await $1(),et(Ye("请安全地保存你的私钥，并提前和接收方交换公钥","2","3"),Ye("成功！","",""))};B.export.onclick=()=>{J1()};B.import.onclick=async()=>{await _1(),br()};let _,Y;B.up.onclick=()=>{Y=(Y+1)%_.length,fe("promptIndex",Y),B.prompt.value=_[Y]};B.down.onclick=()=>{Y=(Y-1+_.length)%_.length,fe("promptIndex",Y),B.prompt.value=_[Y]};B.save.onclick=()=>{B.prompt.value?(kn("prompts",B.prompt.value),_=ye("prompts",[""]),Y=_.length-1,fe("promptIndex",Y),et("","保存成功！")):(kn("prompts",null,Y),_=ye("prompts",[""]),Y=_.length-1,B.prompt.value=_[Y],fe("promptIndex",Y),et("","删除成功！"))};function br(){B0(),C0(),_=ye("prompts",[""]),Y=ye("promptIndex",_.length-1),B.prompt.value=_[Y]}xr();e0();br();function jt(t){return t===32||t===44||t===46||t>=65&&t<=90||t>=97&&t<=122?1:t===65292||t===12290||t===8221||t===30340?2:3}const wr=["？","?","！","!","。","）",")","…","}","]","."];async function on(t,n,e){let r={prompt:t,response_fields:e?["content","stopping_word"]:["completion_probabilities","tokens"],logit_bias:[["�",!1]]};e?r.stop=wr:lt===0?(r.n_predict=1,r.top_k=60,r.n_probs=60,r.post_sampling_probs=!0,r.return_tokens=!0):(r.n_predict=1,r.top_k=20,r.n_probs=20,r.post_sampling_probs=!0,r.return_tokens=!0);const s=await(await fetch("http://127.0.0.1:8090/completion",{method:"POST",body:JSON.stringify(r)})).json();if(e)return s.stopping_word?s.content+s.stopping_word:await on(t,n,!0);const a=s.completion_probabilities;if(!a)return[{id:s.tokens[0],token:" ",bytes:[255,255],prob:1}];let o=a[0].top_probs.filter(f=>m0(f.token));return lt<o.length-1?t0(o,0,o.length-lt++):o}let Pe,oe,Se,lt,ce,dt;async function ht(t,n,e,r){if(ce)return;const i=t/Pe.length,s=i*100;B.progress.style.setProperty("--value",s),B.progress.setAttribute("aria-valuenow",s);const a=await on(oe,i,!1);for(let o=0;o<a.length;o++){if(ce)return;let f;if(r>0){const h=oe.slice(-r);if(h.push(a[o].id),f=await u0(h),f.includes("�")){if(oe.push(a[o].id),Se.push(a[o].id),await ht(t,n,e,r+1),ce)return;oe.pop(),Se.pop();continue}}else if(f=a[o].token,f===" "&&a[o].bytes.length>=2||f.includes("�")){if(oe.push(a[o].id),Se.push(a[o].id),await ht(t,n,e,r+1),ce)return;oe.pop(),Se.pop();continue}let l=n,c=e,d=0;for(let h=0;;h++){if(ce)return;if(h>=f.length){if(oe.push(a[o].id),Se.push(a[o].id),B.coverText.value+=f,await ht(t+d,l,c,0),ce)return;oe.pop(),Se.pop(),B.coverText.value=B.coverText.value.slice(0,-f.length);break}if(l+=f[h],c+=jt(f.codePointAt(h)),f.codePointAt(h)>65535&&(l+=[++h]),c>=3){if(Gt(l)%2!==Pe[t+d])break;d++,l="",c=0,t+d===Pe.length&&(ce=!0,dt?(Se.push(a[o].id),B.coverText.value+=f):B.coverText.value+=f.slice(0,h+1))}}}}const yr=[0,0,0,0,1,1,0,1,1,0,0,1,0,1,1,0,1,1,1,0,1,1,0,0];async function U0(t,n){if(!B.progress.classList.contains("hidden")){ce=!0;return}if(!n){B.secret.focus();return}if(!t){B.prompt.focus();return}const e=await s0(n);let[r,i]=e,s=await ar(B.publicKey);if(s&&(r=await l0(r,JSON.parse(s))),Pe=Ln(r),dt=ye("insertion",!0),dt){if(r.length>65535){et("内容过多，请减少内容或关闭前后插入选项");return}let a=new Uint8Array(2);a[0]=r.length/256,a[1]=r.length%256,Pe=[...yr,...Ln(a),...Pe]}if(oe=await h0(t),Se=[],B.coverText.value="",lt=0,ce=!1,B.progress.style.setProperty("--value",0),B.progress.setAttribute("aria-valuenow",0),B.progress.classList.remove("hidden"),B.tooltip3.classList.remove("invisible"),await ht(0,"",0,0),B.tooltip3.classList.add("invisible"),B.progress.classList.add("hidden"),!ce){et("请尝试减少输入内容，或在github反馈","隐写失败！");return}dt&&!wr.includes(B.coverText.value[B.coverText.value.length-1])&&(B.coverText.value+=await on(oe,1,!0))}async function I0(t){if(!t){B.coverText.focus();return}let n,e=t;for(;e;e=e.slice(1)){let i=[],s="",a=0;for(const l of e)s+=l,a+=jt(l.codePointAt(0)),a>=3&&(i.push(Gt(s)%2),s="",a=0);let o=y0(i,yr);if(o==-1)continue;o+=24;let f=0;for(let l=0;l<16;l++)f+=i[o+l]*(1<<15-l);o+=16,i=i.slice(o,o+f*8),n=Tn(i);break}if(!n){let i=[],s="",a=0;for(const o of t)s+=o,a+=jt(o.codePointAt(0)),a>=3&&(i.push(Gt(s)%2),s="",a=0);n=Tn(i)}let r=await ar(B.privateKey);r&&(n=await d0(n,JSON.parse(r))),B.secret.value=await o0(n)}B.hide.onclick=async()=>{await U0(B.prompt.value,B.secret.value)};B.extract.onclick=async()=>{await I0(B.coverText.value)};
